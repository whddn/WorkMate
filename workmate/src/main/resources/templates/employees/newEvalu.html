<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org/" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
  layout:decorate="~{common/layouts/emp_layout}" layout:fragment="content">
  <head>
    <meta charset="UTF-8">
    <title>new Evalu</title>
    <style>
     body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #f4f6f8;
      margin: 0;
      padding: 0;
    }
    
    .container {
      max-width: 800px;
      margin: 50px auto;
      background: #fff;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    h1 {
      text-align: center;
      margin-bottom: 30px;
    }

    .form-group {
      margin-bottom: 20px;
    }

    label {
      font-weight: bold;
      color: #333;
      display: block;
      margin-bottom: 5px;
    }

    input, select {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      border: 1px solid #ddd;
      border-radius: 6px;
      box-sizing: border-box;
    }

	select {
	  width: 100%; /* select 요소가 부모 컨테이너의 너비를 따르도록 설정 */
	  min-width: 200px; /* 최소 너비 설정 */
	  white-space: nowrap; /* 텍스트가 줄 바꿈 없이 한 줄로 표시 */
	  overflow: hidden; /* 넘칠 경우 숨김 */
	  text-overflow: ellipsis; /* 넘칠 경우 "..."으로 표시 */
	  background-color: #f9f9f9;
}

	select option {
	  white-space: nowrap; /* 텍스트가 줄 바꿈 없이 한 줄로 표시 */
	  overflow: hidden; /* 넘칠 경우 숨김 */
	  text-overflow: ellipsis; /* 넘칠 경우 "..."으로 표시 */
}
	
    .form-row {
      display: flex;
      justify-content: space-between;
      gap: 20px;
    }

    .form-row .form-group {
      flex: 1;
    }

    .button-container {
      display: flex;
      justify-content: space-between;
      margin-top: 30px;
    }

    .button-container button {
      padding: 10px 20px;
      border: none;
      border-radius: 6px;
      font-weight: bold;
      cursor: pointer;
    }

    .button-container button#cancel-btn {
      background-color: #e7edf7;
      color: #333;
    }

    .button-container button#submit-btn {
      background-color: #4caf50;
      color: white;
    }

    /* 표 형태 항목 */
    table {
      width: 100%;
      margin-top: 20px;
      border-collapse: collapse;
    }

    table th, table td {
      padding: 10px;
      border: 1px solid #ddd;
      text-align: center;
    }

    table th {
      background-color: #f4f6f8;
    }

    .form-row .form-group {
      margin-right: 10px;
    }

    .form-row .form-group:last-child {
      margin-right: 0;
    }

    .form-group.select-group {
      margin-top: 20px;
    }

    #evaluName {
      width: 400px; /* 너비 조정 */
    }

    /* +, - 버튼 스타일 */
    .add-remove-buttons {
      text-align: right;
      margin-top: 10px;
    }

    .add-remove-buttons button {
      padding: 5px 10px;
      border: 1px solid #ddd;
      border-radius: 6px;
      background-color: #f4f6f8;
      cursor: pointer;
    }
    
    .add-remove-buttons button:hover {
      background-color: #e0e0e0;
    }

    /* 평가 제목 레이블 스타일 */
    .form-row label {
      font-size: 1.1em;
      color: #555;
    }

    .form-row input {
      border: 1px solid #ccc;
      padding: 12px;
    }

    /* 평가 제목과 input 나란히 배치 */
    .form-row .form-group {
      display: flex;
      align-items: center;
    }

    .form-row .form-group label {
      width: 100px; /* 레이블 너비 조정 */
      margin-right: 10px;
    }

    .form-row .form-group input {
      flex: 1;
    }
  </style>
  </head>
<body>
  <div class="container">
    <h1>다면 평가 등록</h1>
    <form id="evaluation-form">
      <!-- 평가 제목 부분 -->
      <div class="form-row">
        <div class="form-group">
          <label for="evaluName">평가 제목</label>
          <input type="text" id="evaluName" name="evaluName" required>
        </div>
      </div>

      <!-- 기간 설정 -->
      <div class="form-row">
        <div class="form-group">
          <label for="start-date">평가 시작일</label>
          <input type="date" id="start-date" name="start-date" required>
        </div>

        <div class="form-group">
          <label for="end-date">평가 종료일</label>
          <input type="date" id="end-date" name="end-date" required>
        </div>
      </div>

      <!-- 항목 1~7: 표 형태 -->
      <table id="evaluation-items">
        <thead>
          <tr>
            <th>항목</th>
            <th>내용</th>
          </tr>
        </thead>
        <tbody>
          <tr>
			<td>
              <select id="evaCompet">
                <option th:each="con : ${content}">[[ ${con.key} ]]</option>
              </select>
            </td>
            <td>
              <select id="allContent">
                <option id="evaContent">내용을 선택하세요.</option>
              </select>
            </td>
          </tr>
          
        </tbody>
      </table>

      <!-- 소속 부서와 소속 팀 선택 -->
      <div class="form-row select-group">
        <div class="form-group">
          <label for="department">소속 부서</label>
          <select id="department" name="department" required>
            <option value="">부서를 선택하세요</option>
            <option value="department1" th:each="dept : ${names}">[[ ${dept.departmentName} ]]</option>
          </select>
        </div>

        <div class="form-group">
          <label for="team">소속 팀</label>
          <select id="team" name="team" required>
            <option value="">팀을 선택하세요</option>
            <option th:each="t : ${teams}" th:value="${t.teamNo}">[[ ${t.teamName} ]]</option>
          </select>
        </div>
      </div>

      <!-- 등록하기 버튼과 취소 버튼 -->
      <div class="button-container">
        <button type="submit" id="submit-btn">등록하기</button>
        <button type="button" id="cancel-btn">취소</button>
      </div>
    </form>
  </div>
 <script th:inline="javascript">
//타임리프에서 content 배열을 받아옵니다.
 let compet = [[ ${content} ]];  // compet 배열을 타임리프에서 받아옴
 let competSelect = document.querySelector("#evaCompet");  // 왼쪽 드롭다운
 let contentSelect = document.querySelector("#evaContent"); // 오른쪽 드롭다운
 let rightAll = document.querySelector("#allContent");
 
 competSelect.addEventListener('change', function() {
	rightAll.innerHTML = ''; // option 태그 초기화
	for (let i = 0; i < competSelect.length; i++) {
		let option = document.createElement("option");
		option.textContent = compet[evaCompet.value][i].evaluContent;
		rightAll.append(option);
	}
 });

    </script>



</body>
</html>
