<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{common/layouts/contracts_layout}"
      layout:fragment="content">
<head>
    <meta charset="UTF-8">
    <title>í‘œì¤€ê·¼ë¡œê³„ì•½ì„œ ì‘ì„±</title>
    <style>
        .contract-section {
            border: 1px solid #000;
            padding: 30px;
            line-height: 1.8;
            font-size: 16px;
        }
        .contract-section input[type="text"],
        .contract-section input[type="date"],
        .contract-section input[type="number"] {
            border: none;
            border-bottom: 1px solid #000;
            outline: none;
            width: 150px;
            text-align: center;
        }
        .contract-section input[readonly] {
            background-color: #f5f5f5;
            color: #555;
        }
        .contract-section input[type="checkbox"] {
            margin-left: 10px;
        }
        .contract-section .wide-input {
            width: 300px;
        }
    </style>
</head>
<body>
<div class="container mt-5">
    <h2 class="mb-4 text-center" name="contrTitle" value="í‘œì¤€ê·¼ë¡œê³„ì•½ì„œ"> í‘œì¤€ê·¼ë¡œê³„ì•½ì„œ (ê¸°ê°„ì˜ ì •í•¨ì´ ì—†ëŠ” ê²½ìš°)</h2>
    <form id="standardContractForm" method="post" th:action="@{/contracts/submit}" enctype="multipart/form-data">

        <div class="contract-section">
            <p>(ì´í•˜ "ì‚¬ì—…ì£¼"ë¼ í•¨)ê³¼ <input type="text" name="employeeName"> (ì´í•˜ "ê·¼ë¡œì"ë¼ í•¨)ì€ ë‹¤ìŒê³¼ ê°™ì´ ê·¼ë¡œê³„ì•½ì„ ì²´ê²°í•œë‹¤.</p>
            <ol>
                <li>ê·¼ë¡œ ê°œì‹œì¼ : <input type="date" name="contrStart"></li>
                <li>ê·¼ë¬´ ì¥ì†Œ : <input type="text" name="cntrLocation" class="wide-input"></li>
                <li>ì—…ë¬´ì˜ ë‚´ìš© : <input type="text" name="contrContent" class="wide-input"></li>
                <li>ì†Œì •ê·¼ë¡œì‹œê°„ : <input type="number" value="07" readonly>ì‹œ <input type="number" value="00" readonly>ë¶„ë¶€í„°
                    <input type="number" value="18" readonly>ì‹œ <input type="number" value="00" readonly>ë¶„ê¹Œì§€
                </li>
                <li>ê·¼ë¬´ì¼/íœ´ì¼ : ë§¤ì£¼ <input type="text" name="workDays" value="5" readonly>ì¼, ì£¼íœ´ì¼ ë§¤ì£¼ <input type="text" name="offDay" value="í† /ì¼" readonly>ìš”ì¼</li>
                <li>
                    ì„ê¸ˆ<br>
                    - ì›”ê¸‰ : <input type="text" name="cntrMoney" value="3,000000" readonly>ì›<br>
                    - ìƒì—¬ê¸ˆ : ìˆìŒ (<input type="text" name="bonus" value="" readonly> ì›), ì—†ìŒ ( )<br>
                    - ê¸°íƒ€ìˆ˜ë‹¹ : ìˆìŒ (<input type="text" name="extraPay" value="" readonly> ì›), ì—†ìŒ ( )<br>
                    - ì„ê¸ˆì§€ê¸‰ì¼ : ë§¤ì›” 15ì¼<br>
                    - ì§€ê¸‰ë°©ë²• : ê·¼ë¡œìì—ê²Œ ì§ì ‘ì§€ê¸‰( ), ì˜ˆê¸ˆí†µì¥ì— ì…ê¸ˆ( )
                </li>
                <li>ì—°ì°¨ìœ ê¸‰íœ´ê°€ëŠ” ê·¼ë¡œê¸°ì¤€ë²•ì— ë”°ë¼ ë¶€ì—¬í•¨</li>
                <li>
                    ì‚¬íšŒë³´í—˜ ì ìš©ì—¬ë¶€:<br>
                    <input type="checkbox" name="contrStatus" value="ê³ ìš©ë³´í—˜"> ê³ ìš©ë³´í—˜
                    <input type="checkbox" name="contrStatus" value="ì‚°ì¬ë³´í—˜"> ì‚°ì¬ë³´í—˜
                    <input type="checkbox" name="contrStatus" value="êµ­ë¯¼ì—°ê¸ˆ"> êµ­ë¯¼ì—°ê¸ˆ
                    <input type="checkbox" name="contrStatus" value="ê±´ê°•ë³´í—˜"> ê±´ê°•ë³´í—˜
                </li>
                <li>ê·¼ë¡œê³„ì•½ì„œ êµë¶€ : ê³„ì•½ ì²´ê²° ì‹œ ë³¸ ê³„ì•½ì„œë¥¼ êµë¶€í•¨ (ê·¼ë¡œê¸°ì¤€ë²• ì œ17ì¡°)</li>
                <li>ê·¼ë¡œê³„ì•½ ë° ì·¨ì—…ê·œì¹™ ë“±ì˜ ì„±ì‹¤í•œ ì´í–‰ì˜ë¬´</li>
                <li>ê¸°íƒ€ : ë³¸ ê³„ì•½ì„œì— ì •í•¨ì´ ì—†ëŠ” ì‚¬í•­ì€ ê·¼ë¡œê¸°ì¤€ë²•ì— ì˜í•¨</li>
            </ol>

            <p class="mt-4 text-end">ì‘ì„±ì¼ : <input type="date" name="createDate"></p>

            <table class="table table-bordered">
                <tr>
                    <th style="width: 20%">ê·¼ë¡œì ì„±ëª…</th>
                    <td><input type="text" name="contrB" class="form-control"></td>
                    <th style="width: 20%">ì„œëª…</th>
                    <td>
                        <canvas id="signatureCanvas" width="300" height="100" style="border:1px solid #ccc;"></canvas>
                        <input type="hidden" name="signImageBase64" id="signImageInput">
                        <button type="button" class="btn btn-sm btn-outline-secondary mt-2" onclick="clearSignature()">ì„œëª… ì§€ìš°ê¸°</button>
                    </td>
                </tr>
            </table>
        </div>

        <div class="d-flex justify-content-end mt-3">
            <button type="submit" class="btn btn-primary">ğŸ“Œ ì œì¶œ</button>
        </div>
    </form>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const canvas = document.getElementById('signatureCanvas');
        const ctx = canvas.getContext('2d');
        let drawing = false;

        canvas.addEventListener('mousedown', () => drawing = true);
        canvas.addEventListener('mouseup', () => {
            drawing = false;
            ctx.beginPath();
        });
        canvas.addEventListener('mousemove', draw);

        function draw(e) {
            if (!drawing) return;
            const rect = canvas.getBoundingClientRect();
            ctx.lineWidth = 2;
            ctx.lineCap = "round";
            ctx.strokeStyle = "#000";
            ctx.lineTo(e.clientX - rect.left, e.clientY - rect.top);
            ctx.stroke();
            ctx.beginPath();
            ctx.moveTo(e.clientX - rect.left, e.clientY - rect.top);
        }

        document.getElementById('standardContractForm').addEventListener('submit', function (e) {
            const blank = document.createElement('canvas');
            blank.width = canvas.width;
            blank.height = canvas.height;
            if (canvas.toDataURL() === blank.toDataURL()) {
                alert("ì„œëª…ì„ í•´ì£¼ì„¸ìš”.");
                e.preventDefault();
                return;
            }
            document.getElementById('signImageInput').value = canvas.toDataURL('image/png');
        });
    });

    function clearSignature() {
        const canvas = document.getElementById('signatureCanvas');
        const ctx = canvas.getContext('2d');
        ctx.clearRect(0, 0, canvas.width, canvas.height);
    }
</script>
</body>
</html>